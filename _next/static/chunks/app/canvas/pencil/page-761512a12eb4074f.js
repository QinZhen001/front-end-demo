(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{810:(e,t,r)=>{Promise.resolve().then(r.bind(r,2134))},2134:(e,t,r)=>{"use strict";let o,n;r.r(t),r.d(t,{default:()=>d});var s=r(5155),i=r(2115),a=r(3312);let l=0,u=0,d=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),r=(0,i.useRef)("up"),d=()=>new Promise((t,r)=>{let n=new Image;n.src="/images/color_block.jpg",n.crossOrigin="Anonymous",n.onload=()=>{o.drawImage(n,0,0,e.current.width,e.current.height),t(!0)}}),c=()=>t.current.toDataURL("image/png"),f=()=>{o=e.current.getContext("2d");let{left:t,top:r}=e.current.getBoundingClientRect();l=t,u=r},h=()=>{(n=t.current.getContext("2d")).fillStyle="black",n.fillRect(0,0,e.current.width,e.current.height)},g=async()=>{h(),f(),await d()};(0,i.useEffect)(()=>{g()},[]);let b=(e,t)=>{o.strokeStyle="red",o.lineWidth=4,o.beginPath(),o.moveTo(e,t),n.strokeStyle="white",n.lineWidth=4,n.beginPath(),n.moveTo(e,t)},v=(e,t)=>{o.lineTo(e,t),o.stroke(),n.lineTo(e,t),n.stroke()},p=()=>{o.closePath(),n.closePath()};return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.$,{onClick:()=>{let e=c(),t=new Image;t.src=e;let r=document.getElementById("img-wrapper");null==r||r.appendChild(t)},children:"导出图片"}),(0,s.jsxs)("section",{className:"mt-2 flex",children:[(0,s.jsxs)("div",{className:"relative h-[600px] w-[300px]",children:[(0,s.jsx)("canvas",{className:"invisible absolute bottom-0 left-0 right-0 top-0 -z-10",width:300,height:600,ref:t}),(0,s.jsx)("canvas",{className:"visible absolute bottom-0 left-0 right-0 top-0 z-10",width:300,height:600,ref:e,onMouseDown:e=>{if("down"===r.current)return;r.current="down";let{clientX:t,clientY:o}=e;b(t-l,o-u)},onMouseMove:e=>{if("up"===r.current)return;let{clientX:t,clientY:o}=e;v(t-l,o-u)},onMouseUp:e=>{console.log("onMouseUp"),"up"!==r.current&&(r.current="up",p())}})]}),(0,s.jsx)("div",{id:"img-wrapper"})]})]})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>u});var o=r(5155),n=r(2115),s=r(2317),i=r(1027),a=r(1567);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-white",{variants:{variant:{default:"bg-primary shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",nav:"relative z-10 before:absolute before:inset-0 before:rounded-full before:p-[1px] before:bg-gradient-to-l before:from-[#008CFF] before:to-[#00CCB4] before:-z-10 after:absolute after:inset-[1px] after:rounded-full after:bg-[var(--color-header-bg)] after:-z-10"},size:{default:"h-9 px-4 py-2",xs:"h-6 rounded-full px-3 text-xs",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",nav:"h-9 w-auto px-3 py-1 text-xs rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:u=!1,...d}=e,c=u?s.DX:"button";return(0,o.jsx)(c,{className:(0,a.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});u.displayName="Button"},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s,hw:()=>i});var o=r(3463),n=r(9795);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,o.$)(t))}let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e=Math.floor(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1365,8441,1517,7358],()=>t(810)),_N_E=e.O()}]);