(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9052],{665:(e,t,a)=>{Promise.resolve().then(a.bind(a,8158))},8158:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var i=a(5155),s=a(2115),r=a(7528);let n=e=>{let{options:t}=e;return(0,i.jsxs)(r.l6,{children:[(0,i.jsx)(r.bq,{className:"w-72",children:(0,i.jsx)(r.yv,{placeholder:"选择音频输入设备"})}),(0,i.jsx)(r.gC,{children:t.map(e=>(0,i.jsx)(r.eb,{value:e.deviceId,children:e.label},e.deviceId))})]})},l=e=>{let{options:t}=e;return(0,i.jsxs)(r.l6,{children:[(0,i.jsx)(r.bq,{className:"w-72",children:(0,i.jsx)(r.yv,{placeholder:"选择音频输出设备"})}),(0,i.jsx)(r.gC,{children:t.map(e=>(0,i.jsx)(r.eb,{value:e.deviceId,children:e.label},e.deviceId))})]})},d=e=>{let{options:t}=e;return(0,i.jsxs)(r.l6,{children:[(0,i.jsx)(r.bq,{className:"w-72",children:(0,i.jsx)(r.yv,{placeholder:"选择视频输入设备"})}),(0,i.jsx)(r.gC,{children:t.map(e=>(0,i.jsx)(r.eb,{value:e.deviceId,children:e.label},e.deviceId))})]})};var o=a(5900),c=a(1567);let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsxs)(o.bL,{ref:t,className:(0,c.cn)("relative flex w-full touch-none select-none items-center",a),...s,children:[(0,i.jsx)(o.CC,{className:"bg-border relative h-1.5 w-full grow overflow-hidden rounded-full",children:(0,i.jsx)(o.Q6,{className:"absolute h-full bg-primary"})}),(0,i.jsx)(o.zi,{className:"focus-visible:ring-ring block h-4 w-4 rounded-full border border-primary bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50"})]})});u.displayName=o.bL.displayName;var h=a(3312);let g=[{width:160,height:96,resolutionState:!1},{width:162,height:160,resolutionState:!1},{width:516,height:288,resolutionState:!1},{width:640,height:360,resolutionState:!1},{width:848,height:480,resolutionState:!1},{width:1280,height:720,resolutionState:!1},{width:1920,height:1080,resolutionState:!1}],f=()=>{let[e,t]=(0,s.useState)("idle"),[a,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)([]),[S,C]=(0,s.useState)([]),[k,D]=(0,s.useState)([]),[R,P]=(0,s.useState)(!1),[M,T]=(0,s.useState)(!1),[z,E]=(0,s.useState)(),[V,U]=(0,s.useState)(),[q,I]=(0,s.useState)(g),[_,L]=(0,s.useState)(0),[O,A]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),H=(0,s.useRef)(null);(0,s.useEffect)(()=>{"loading"==e&&Y()},[o,e]),(0,s.useEffect)(()=>{"loading"==e&&(W(),Z())},[z,e]);let J=()=>{var e,t;RTCPeerConnection&&r(!0),(null===(t=navigator)||void 0===t?void 0:null===(e=t.mediaDevices)||void 0===e?void 0:e.enumerateDevices)&&c(!0)},X=async()=>{var e,t;if(!(null===(t=navigator)||void 0===t?void 0:null===(e=t.mediaDevices)||void 0===e?void 0:e.getUserMedia))return;let a=await navigator.mediaDevices.getUserMedia({video:!0});console.log("获取到摄像头stream",a),P(!0),E(a),H.current&&(H.current.srcObject=a,H.current.play(),console.log("默认settings: ",a.getVideoTracks()[0].getSettings()))},$=async()=>{if(!AudioContext||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return;let e=new AudioContext,t=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("获取到麦克风stream",t),T(!0),U(t);let a=e.createScriptProcessor(2048,1,1);a.onaudioprocess=e=>{let t=e.inputBuffer.getChannelData(0),a=0;for(let e=0;e<t.length;++e)a+=t[e]*t[e];L(Math.sqrt(a/t.length))},e.createMediaStreamSource(t).connect(a),a.connect(e.destination)},Q=async()=>{var e,t;if(!RTCPeerConnection)return;let a=new RTCPeerConnection,i=await a.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});console.log("接收端（解码）：",i.sdp),x(!!(null==i?void 0:null===(e=i.sdp)||void 0===e?void 0:e.includes("H264"))),j(!!(null==i?void 0:null===(t=i.sdp)||void 0===t?void 0:t.includes("VP8")))},W=async()=>{var e,t;if(!RTCPeerConnection||!z)return;let a=new RTCPeerConnection;a.addTrack&&"closed"!==a.signalingState?a.addTrack(z.getVideoTracks()[0],z):a.dispatchEvent(new Event("negotiationneeded"));let i=await a.createOffer();console.log("发送端（编码）：",i.sdp);let s=!!(null==i?void 0:null===(e=i.sdp)||void 0===e?void 0:e.includes("H264")),r=!!(null==i?void 0:null===(t=i.sdp)||void 0===t?void 0:t.includes("VP8"));v(s),b(r)},Y=async()=>{if(o){let e=await navigator.mediaDevices.enumerateDevices();console.log("devices",e);let t=[],a=[],i=[];e.forEach(e=>{"audioinput"===e.kind&&t.push(e),"audiooutput"===e.kind&&a.push(e),"videoinput"===e.kind&&i.push(e)}),N(t),C(a),D(i)}},Z=async()=>{if(!z)return;let e=z.getVideoTracks()[0];for(let[t,a]of q.entries())try{let i={height:{ideal:a.height},width:{ideal:a.width}};await e.applyConstraints(i),console.log("设置分辨率：".concat(a.width," X ").concat(a.height," 成功"));let s=e.getSettings();s.height==a.height&&s.width==a.width&&I(e=>{let a=[...e];return a[t].resolutionState=!0,a})}catch(e){console.error(e),q.length}},G=async()=>{navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(await navigator.mediaDevices.getDisplayMedia(),A(!0))},K=async()=>{let e=document.createElement("video");("captureStream"in e||"mozCaptureStream"in e||"webkitCaptureStream"in e)&&F(!0)};return"idle"==e?(0,i.jsx)("div",{children:(0,i.jsx)(h.$,{onClick:()=>{t("loading"),J(),X(),Q(),$(),G(),K()},children:"开始测试"})}):(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-lg",children:["支持webrtc api: ",a.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持获取设备列表: ",o.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持H264编码: ",f.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持H264解码: ",m.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持VP8编码: ",p.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持VP8解码: ",w.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:[(0,i.jsxs)("div",{children:["支持音频输入: ",M.toString()]}),(0,i.jsxs)("div",{children:["支持音频输入设备: ",(!!y.length).toString()]}),(0,i.jsx)(n,{options:y}),(0,i.jsx)(u,{className:"mt-2",value:[_],max:1,min:0,step:.01})]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持音频输出设备: ",(!!S.length).toString(),(0,i.jsx)(l,{options:S}),(0,i.jsx)("div",{className:"text-red-500",children:"音频输出检测可以在这播放一个mp3"})]}),(0,i.jsxs)("div",{className:"text-lg",children:[(0,i.jsxs)("div",{children:["支持视频输入: ",R.toString()]}),(0,i.jsxs)("div",{children:["支持视频输入设备: ",(!!k.length).toString()]}),(0,i.jsx)(d,{options:k}),(0,i.jsx)("video",{className:"mt-2",ref:H,width:288,height:160})]}),(0,i.jsxs)("div",{className:"text-lg",children:["分辨率检测:",(0,i.jsx)("ul",{children:q.map(e=>(0,i.jsxs)("li",{className:"text-sm",children:[e.width," X ",e.height," ",e.resolutionState?"支持":"不支持"]},e.width))})]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持屏幕共享: ",O.toString()]}),(0,i.jsxs)("div",{className:"text-lg",children:["支持屏幕共享: ",B.toString()]})]})}},3312:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var i=a(5155),s=a(2115),r=a(2317),n=a(1027),l=a(1567);let d=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-white",{variants:{variant:{default:"bg-primary shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",nav:"relative z-10 before:absolute before:inset-0 before:rounded-full before:p-[1px] before:bg-gradient-to-l before:from-[#008CFF] before:to-[#00CCB4] before:-z-10 after:absolute after:inset-[1px] after:rounded-full after:bg-[var(--color-header-bg)] after:-z-10"},size:{default:"h-9 px-4 py-2",xs:"h-6 rounded-full px-3 text-xs",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",nav:"h-9 w-auto px-3 py-1 text-xs rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:o=!1,...c}=e,u=o?r.DX:"button";return(0,i.jsx)(u,{className:(0,l.cn)(d({variant:s,size:n,className:a})),ref:t,...c})});o.displayName="Button"},7528:(e,t,a)=>{"use strict";a.d(t,{bq:()=>c,eb:()=>f,gC:()=>g,l6:()=>d,yv:()=>o});var i=a(5155),s=a(2115),r=a(7365),n=a(4065),l=a(1567);let d=n.bL;n.YJ;let o=n.WT,c=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,i.jsxs)(n.l9,{ref:t,className:(0,l.cn)("border-input ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border bg-[var(--color-input-bg)] bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[s,(0,i.jsx)(n.In,{asChild:!0,children:(0,i.jsx)(r.TBE,{className:"h-4 w-4 opacity-50"})})]})});c.displayName=n.l9.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.PP,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,i.jsx)(r.Mtm,{})})});u.displayName=n.PP.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.wn,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,i.jsx)(r.D3D,{})})});h.displayName=n.wn.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,position:r="popper",...d}=e;return(0,i.jsx)(n.ZL,{children:(0,i.jsxs)(n.UC,{ref:t,className:(0,l.cn)("bg-popover text-popover-foreground relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...d,children:[(0,i.jsx)(u,{}),(0,i.jsx)(n.LM,{className:(0,l.cn)("p-1","bg-white","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,i.jsx)(h,{})]})})});g.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.JU,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,i.jsxs)(n.q7,{ref:t,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm bg-white py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,i.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(n.VF,{children:(0,i.jsx)(r.Srz,{className:"h-4 w-4"})})}),(0,i.jsx)(n.p4,{children:s})]})});f.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.wv,{ref:t,className:(0,l.cn)("bg-muted -mx-1 my-1 h-px",a),...s})}).displayName=n.wv.displayName},1567:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r,hw:()=>n});var i=a(3463),s=a(9795);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,i.$)(t))}let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e=Math.floor(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e}}},e=>{var t=t=>e(e.s=t);e.O(0,[5105,1365,2099,4065,5900,8441,1517,7358],()=>t(665)),_N_E=e.O()}]);