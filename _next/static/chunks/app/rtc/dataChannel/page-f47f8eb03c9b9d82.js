(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8050],{7279:(e,t,n)=>{Promise.resolve().then(n.bind(n,8721))},8721:(e,t,n)=>{"use strict";let s,a,o,l;n.r(t),n.d(t,{default:()=>f});var r=n(5155),i=n(2115),c=n(3312),d=n(8071),u=n(5564);let f=()=>{let[e,t]=(0,i.useState)(""),[n,f]=(0,i.useState)("disconnected"),[h,p]=(0,i.useState)([]),{toast:v}=(0,u.dj)(),x=()=>{(o=(s=new RTCPeerConnection).createDataChannel("sendChannel")).onopen=b,o.onclose=b,(a=new RTCPeerConnection).ondatachannel=m,s.onicecandidate=e=>!e.candidate||(null==a?void 0:a.addIceCandidate(e.candidate).catch(y)),a.onicecandidate=e=>!e.candidate||(null==s?void 0:s.addIceCandidate(e.candidate).catch(y)),s.createOffer().then(e=>(console.log("localConnection createOffer success",e),null==s?void 0:s.setLocalDescription(e))).then(()=>null==a?void 0:a.setRemoteDescription(s.localDescription)).then(()=>null==a?void 0:a.createAnswer()).then(e=>null==a?void 0:a.setLocalDescription(e)).then(()=>null==s?void 0:s.setRemoteDescription(a.localDescription)).then(()=>{v({title:"connect success"})}).catch(C)},g=()=>{null==o||o.close(),null==l||l.close(),null==s||s.close(),null==a||a.close(),o=null,l=null,s=null,a=null,v({title:"disconnect success"})},b=e=>{o&&("open"==o.readyState?console.log("sendChannel is open"):console.log("sendChannel is closed"))},m=e=>{(l=e.channel).onmessage=w,l.onopen=S,l.onclose=S},w=e=>{console.log("Received Message: "+e.data),p(t=>[...t,e.data])},S=e=>{l&&console.log("Receive channel's status has changed to "+l.readyState)},y=e=>{console.error("Oh noes! addICECandidate failed!",e)},C=e=>{let t="Unable to create an offer: "+e.toString();console.error(t),v({variant:"destructive",title:t})};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-x-2",children:(0,r.jsx)(c.$,{onClick:()=>{"connected"==n?(g(),f("disconnected")):(x(),f("connected"))},children:"connected"==n?"disconnectPeers":"connectPeers"})}),(0,r.jsxs)("section",{className:"mt-2 space-x-2",children:[(0,r.jsx)(d.p,{label:"meaage:",value:e,onChange:e=>{t(e.target.value)}}),(0,r.jsx)(c.$,{onClick:()=>{console.log("sendChannel send: "+e),null==o||o.send(e)},children:"sendMessage"})]}),(0,r.jsxs)("section",{className:"mt-2",children:[(0,r.jsx)("div",{className:"text-lg",children:"Received Message: "}),h.map(e=>(0,r.jsx)("div",{className:"text-sm",children:e},e))]})]})}},3312:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var s=n(5155),a=n(2115),o=n(2317),l=n(1027),r=n(1567);let i=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-white",{variants:{variant:{default:"bg-primary shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",nav:"relative z-10 before:absolute before:inset-0 before:rounded-full before:p-[1px] before:bg-gradient-to-l before:from-[#008CFF] before:to-[#00CCB4] before:-z-10 after:absolute after:inset-[1px] after:rounded-full after:bg-[var(--color-header-bg)] after:-z-10"},size:{default:"h-9 px-4 py-2",xs:"h-6 rounded-full px-3 text-xs",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",nav:"h-9 w-auto px-3 py-1 text-xs rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:n,variant:a,size:l,asChild:c=!1,...d}=e,u=c?o.DX:"button";return(0,s.jsx)(u,{className:(0,r.cn)(i({variant:a,size:l,className:n})),ref:t,...d})});c.displayName="Button"},8071:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var s=n(5155),a=n(2115),o=n(3360),l=a.forwardRef((e,t)=>(0,s.jsx)(o.sG.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";let r=e=>{let{defaultValue:t,value:n,onChange:a,type:o="text",label:r}=e;return(0,s.jsxs)("span",{className:"inline-flex flex-wrap items-center gap-2",children:[r?(0,s.jsx)(l,{className:"text-lg",children:r}):null,(0,s.jsx)("input",{className:"bg-blackA2 shadow-blackA6 focus:shadow-outline inline-flex h-8 w-52 appearance-none items-center justify-center rounded px-2.5 text-[15px] leading-none text-black shadow-[0_0_0_1px] outline-none focus:shadow-[0_0_0_2px_black] focus:outline-none",type:o,defaultValue:t,value:n,onChange:a})]})}},5564:(e,t,n)=>{"use strict";n.d(t,{dj:()=>f});var s=n(2115);let a=0,o=new Map,l=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},5e3);o.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?l(n):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function d(e){c=r(c,e),i.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||s()}}}),{id:n,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},1567:(e,t,n)=>{"use strict";n.d(t,{cn:()=>o,hw:()=>l});var s=n(3463),a=n(9795);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.QP)((0,s.$)(t))}let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e=Math.floor(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e}},3360:(e,t,n)=>{"use strict";n.d(t,{hO:()=>i,sG:()=>r});var s=n(2115),a=n(7650),o=n(2317),l=n(5155),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=s.forwardRef((e,n)=>{let{asChild:s,...a}=e,r=s?o.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(r,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function i(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[1365,8441,1517,7358],()=>t(7279)),_N_E=e.O()}]);