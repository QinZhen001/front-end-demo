(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{9124:(e,t,a)=>{Promise.resolve().then(a.bind(a,6660))},6660:(e,t,a)=>{"use strict";let r,o;a.r(t),a.d(t,{default:()=>p});var s=a(5155),d=a(2115),l=a(3312);let n=e=>{let{audioTrack:t}=e,a=async()=>{if(!t)throw Error("audioTrack is null");r=new AudioContext,await r.audioWorklet.addModule("/pcm-processor.js");let e=new AudioWorkletNode(r,"pcm-processor"),a=t.getMediaStreamTrack();r.createMediaStreamSource(new MediaStream([a])).connect(e),e.port.onmessage=e=>{var t,a;console.log("event onmessage",null!==(a=null===(t=e.data)||void 0===t?void 0:t.inputs)&&void 0!==a?a:[])}};return(0,d.useEffect)(()=>()=>{"closed"!=r.state&&r.close()},[]),(0,s.jsx)("div",{children:(0,s.jsx)(l.$,{onClick:a,children:"Deal"})})},i=[],c=e=>{let{audioTrack:t}=e,a=e=>{i.push(e.data)},r=async()=>{let e=new Blob(i,{type:"audio/wav"}),t=URL.createObjectURL(e),a=new AudioContext,r=await fetch(t),o=await r.arrayBuffer();console.log("pcmData1",(await a.decodeAudioData(o)).getChannelData(0))};return(0,s.jsx)("div",{children:(0,s.jsx)(l.$,{onClick:()=>{if(!t)throw Error("audioTrack is null");let e=new MediaRecorder(new MediaStream([t.getMediaStreamTrack()]));e.ondataavailable=a,e.onstop=r,e.start(),setTimeout(()=>{e.stop()},5e3)},children:"Deal"})})};var u=a(7528),f=function(e){return e.AudioWorkletNode="AudioWorkletNode",e.MediaRecorder="MediaRecorder",e}({});let m=e=>{let{value:t,onChange:a,className:r}=e;return(0,s.jsxs)(u.l6,{value:t,onValueChange:a,children:[(0,s.jsx)(u.bq,{className:"max-w-64",children:(0,s.jsx)(u.yv,{placeholder:"选择处理方案"})}),(0,s.jsxs)(u.gC,{className:"max-w-64",children:[(0,s.jsx)(u.eb,{value:"AudioWorkletNode",children:"AudioWorkletNode"}),(0,s.jsx)(u.eb,{value:"MediaRecorder",children:"MediaRecorder"})]})]})},p=()=>{let[e,t]=(0,d.useState)(),[r,i]=(0,d.useState)(!1),[u,p]=(0,d.useState)(f.AudioWorkletNode);(0,d.useEffect)(()=>()=>{null==e||e.stop(),null==e||e.close()},[e]);let h=async()=>{await x(),t(await o.createMicrophoneAudioTrack())},x=async()=>{o=(await Promise.all([a.e(8927),a.e(5714)]).then(a.t.bind(a,7914,23))).default};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("section",{className:"mb-2 space-x-2",children:[(0,s.jsx)(l.$,{onClick:h,children:"createAudioTrack"}),(0,s.jsx)(l.$,{onClick:()=>{r?null==e||e.stop():null==e||e.play(),i(!r)},children:r?"audioStop":"audioPlay"})]}),(0,s.jsxs)("section",{className:"mb-2 mt-2",children:[(0,s.jsx)("div",{className:"text-md mb-2",children:"提取 mic track 中 pcm裸数据"}),(0,s.jsx)(m,{value:u,onChange:e=>p(e)})]}),(0,s.jsxs)("section",{className:"mt-2",children:[u==f.AudioWorkletNode&&(0,s.jsx)(n,{audioTrack:e}),u==f.MediaRecorder&&(0,s.jsx)(c,{audioTrack:e})]})]})}},3312:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var r=a(5155),o=a(2115),s=a(2317),d=a(1027),l=a(1567);let n=(0,d.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 text-white",{variants:{variant:{default:"bg-primary shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",nav:"relative z-10 before:absolute before:inset-0 before:rounded-full before:p-[1px] before:bg-gradient-to-l before:from-[#008CFF] before:to-[#00CCB4] before:-z-10 after:absolute after:inset-[1px] after:rounded-full after:bg-[var(--color-header-bg)] after:-z-10"},size:{default:"h-9 px-4 py-2",xs:"h-6 rounded-full px-3 text-xs",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9",nav:"h-9 w-auto px-3 py-1 text-xs rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),i=o.forwardRef((e,t)=>{let{className:a,variant:o,size:d,asChild:i=!1,...c}=e,u=i?s.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(n({variant:o,size:d,className:a})),ref:t,...c})});i.displayName="Button"},7528:(e,t,a)=>{"use strict";a.d(t,{bq:()=>c,eb:()=>p,gC:()=>m,l6:()=>n,yv:()=>i});var r=a(5155),o=a(2115),s=a(7365),d=a(4065),l=a(1567);let n=d.bL;d.YJ;let i=d.WT,c=o.forwardRef((e,t)=>{let{className:a,children:o,...n}=e;return(0,r.jsxs)(d.l9,{ref:t,className:(0,l.cn)("border-input ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border bg-[var(--color-input-bg)] bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[o,(0,r.jsx)(d.In,{asChild:!0,children:(0,r.jsx)(s.TBE,{className:"h-4 w-4 opacity-50"})})]})});c.displayName=d.l9.displayName;let u=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(d.PP,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(s.Mtm,{})})});u.displayName=d.PP.displayName;let f=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(d.wn,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(s.D3D,{})})});f.displayName=d.wn.displayName;let m=o.forwardRef((e,t)=>{let{className:a,children:o,position:s="popper",...n}=e;return(0,r.jsx)(d.ZL,{children:(0,r.jsxs)(d.UC,{ref:t,className:(0,l.cn)("bg-popover text-popover-foreground relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...n,children:[(0,r.jsx)(u,{}),(0,r.jsx)(d.LM,{className:(0,l.cn)("p-1","bg-white","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(f,{})]})})});m.displayName=d.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(d.JU,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",a),...o})}).displayName=d.JU.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:o,...n}=e;return(0,r.jsxs)(d.q7,{ref:t,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm bg-white py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(d.VF,{children:(0,r.jsx)(s.Srz,{className:"h-4 w-4"})})}),(0,r.jsx)(d.p4,{children:o})]})});p.displayName=d.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(d.wv,{ref:t,className:(0,l.cn)("bg-muted -mx-1 my-1 h-px",a),...o})}).displayName=d.wv.displayName},1567:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s,hw:()=>d});var r=a(3463),o=a(9795);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return e=Math.floor(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e}}},e=>{var t=t=>e(e.s=t);e.O(0,[5105,1365,2099,4065,8441,1517,7358],()=>t(9124)),_N_E=e.O()}]);