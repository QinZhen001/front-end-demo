(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4280],{1431:(t,e,i)=>{Promise.resolve().then(i.bind(i,701))},701:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var n=i(5155);class s{addDep(t){this.deps.push(t)}notify(){this.deps.forEach(t=>t.update())}constructor(){this.deps=[]}}class a{update(){this.cb.call(this.vm,this.vm[this.key],this.initVal)}constructor(t,e,i,n){this.vm=t,this.key=e,this.cb=n,this.initVal=i,s.target=this,this.vm[this.key],s.target=null}}class o{node2Fragment(t){let e;let i=document.createDocumentFragment();for(;e=t.firstChild;)i.appendChild(e);return i}compile(t){Array.from(t.childNodes).forEach(t=>{1===t.nodeType?this.compileElement(t):2==t.nodeType||3==t.nodeType&&this.isInterpolation(t)&&this.compileText(t),t.childNodes&&t.childNodes.length>0&&this.compile(t)})}isInterpolation(t){return 3===t.nodeType&&/\{\{(.*)\}\}/.test(t.textContent)}compileElement(t){Array.from(t.attributes).forEach(e=>{let i=e.name,n=e.value;if(this.isDirective(i)){let e=i.substring(2),s="dir_".concat(e);this[s]&&this[s](t,n)}else if(this.isEvent(i)){let e=i.substring(1);this.eventHandler(t,this.$vm,n,e)}})}isDirective(t){return 0===t.indexOf("k-")}isEvent(t){return 0===t.indexOf("@")}compileText(t){this.update("text",t,RegExp.$1)}update(t,e,i){let n=null;switch(t){case"text":n=this.updateText;let s=e.textContent;n(e,this.$vm[i],s),new a(this.$vm,i,s,function(t,i){n(e,t,i)});break;case"model":(n=this.updateModel)(e,this.$vm[i]),new a(this.$vm,i,null,function(t,i){n(e,t)})}}eventHandler(t,e,i,n){let s=e.$options.methods&&e.$options.methods[i];n&&s&&t.addEventListener(n,s.bind(e))}dir_model(t,e){let i=this.$vm;this.update("model",t,e),t.addEventListener("input",t=>{i[e]=t.target.value})}dir_html(t,e){this.updateHtml(t,this.$vm[e])}dir_text(t,e){this.updateText(t,this.$vm[e])}updateHtml(t,e){t.innerHTML=e}updateText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!i){t.textContent=e;return}var n=String(i.match(/{{(.*)}}/gi)),s=i.replace(n,e);t.textContent=s}updateModel(t,e){t.value=e}constructor(t,e){this.$vm=e,this.$el=document.querySelector(t),this.$el&&(this.$fragment=this.node2Fragment(this.$el),console.log("this.$fragment",this.$fragment),this.compile(this.$fragment),this.$el.appendChild(this.$fragment))}}class h{observe(t){t&&"object"==typeof t&&Object.keys(t).forEach(e=>{t.hasOwnProperty(e)&&(this.defineReactive(t,e,t[e]),this.proxyData(e))})}defineReactive(t,e,i){let n=new s;Object.defineProperty(t,e,{get:()=>(s.target&&n.addDep(s.target),i),set(t){t!==i&&(i=t,console.log("".concat(e,"更新了：").concat(t)),n.notify())}}),this.observe(i)}proxyData(t){Object.defineProperty(this,t,{get(){return this.$data[t]},set(e){this.$data[t]=e}})}constructor(t){this.$options=t,this.$data=t.data,this.observe(this.$data),new o(t.el,this),t.created&&t.created.call(this)}}var r=i(2115);let d=()=>{(0,r.useEffect)(()=>{t(),e()},[]);let t=()=>{document.getElementById("vue").innerHTML='\n      <div id="app">\n        <div k-text="name"></div>\n        <div>name: {{name}}</div>\n        <div>{{age}}</div>\n        <input type="text" k-model="name">\n        <button @click="changeName">changeName</button>\n        <div k-html="html"></div>\n    </div>\n    '},e=()=>{let t=new h({el:"#app",data:{name:"test",age:12,html:"<button>这是一个按钮</button>"},created(){},methods:{changeName(){console.log("before change name: ",this.name),this.name="changeName",console.log("after change name: ",this.name)}}});window.vue=t,console.log("custom vue2: ",t)};return(0,n.jsx)("div",{id:"vue"})}}},t=>{var e=e=>t(t.s=e);t.O(0,[8441,1517,7358],()=>e(1431)),_N_E=t.O()}]);