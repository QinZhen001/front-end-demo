(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6419],{9570:(t,e,i)=>{Promise.resolve().then(i.bind(i,5980))},5980:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var s=i(5155),n=i(2115);class a{proxyData(t){if(!t||"object"!=typeof t)return;let e=this;this.$data=new Proxy(t,{set(t,i,s){let n=Reflect.set(t,i,s);return e.$binding[i].map(t=>t.update()),n}})}pushWatch(t){this.$binding[t.key]||(this.$binding[t.key]=[]),this.$binding[t.key].push(t)}constructor(t){this.$options=t,this.$data=t.data,this.$el=t.el,this.$binding={},this.proxyData(this.$data),new l(t.el,this)}}class l{getNodeChildren(t){let e;let i=document.createDocumentFragment();for(;e=t.firstChild;)i.appendChild(e);return i}compile(t){Array.from(t.childNodes).forEach(t=>{1===t.nodeType?this.compileElement(t):2===t.nodeType||3===t.nodeType&&this.compileText(t),t.childNodes&&t.childNodes.length&&this.compile(t)})}compileElement(t){Array.from(t.attributes).forEach(e=>{let i=e.name,s=e.value;if("z-"===i.slice(0,2))switch(i.substring(2)){case"model":this.zDir_model(t,s);break;case"html":this.zDir_html(t,s)}})}compileText(t){if("string"!=typeof t.textContent)return;let e=t.textContent.match(/{{(.*)}}/);if(!e||!e.length||!e[1])return;let i=e[1].trim();this.updaterAll("text",t,i)}updaterAll(t,e,i){let s=null;switch(t){case"text":s=this.updateText;let n=e.textContent;s(e,this.$vm.$data[i],n),this.$vm.pushWatch(new h(this.$vm,i,n,function(t,i){s(e,t,i)}));break;case"model":s=this.updateModel;let a=this.$vm.$data[i];s(e,a),this.$vm.pushWatch(new h(this.$vm,i,null,function(t,i){s(e,t)}))}}updateText(t,e,i){var s=String(i.match(/{{(.*)}}/gi)),n=i.replace(s,e);t.textContent=n}updateModel(t,e){t.value=e}zDir_model(t,e){let i=this.$vm;this.updaterAll("model",t,e),t.addEventListener("input",t=>{i.$data[e]=t.target.value})}zDir_html(t,e){this.updaterHtml(t,this.$vm.$data[e])}updaterHtml(t,e){t.innerHTML=e}constructor(t,e){this.$el=document.querySelector(t),this.$vm=e,this.$el&&(this.$fragment=this.getNodeChildren(this.$el),this.compile(this.$fragment),this.$el.appendChild(this.$fragment))}}class h{update(){this.cb.call(this.vm,this.vm.$data[this.key],this.initVal)}constructor(t,e,i,s){this.vm=t,this.key=e,this.cb=s,this.initVal=i}}let d=()=>{(0,n.useEffect)(()=>{t(),e()},[]);let t=()=>{document.querySelector("#app").innerHTML='\n    <div>姓名：{{ name }}</div>\n    <div>{{ content }}</div>\n    <div>\n      <input type="text" z-model="name" placeholder="请输入自我介绍" />\n    </div>\n    <div z-html="htmlData"></div>'},e=()=>{let t=new a({el:"#app",data:{name:"someName",content:"someContent",htmlData:'<a href="#">some html</a>'}});window.vue=t,console.log("custom vue3: ",t)};return(0,s.jsxs)("div",{children:["vue3",(0,s.jsx)("div",{id:"app"})]})}}},t=>{var e=e=>t(t.s=e);t.O(0,[8441,1517,7358],()=>e(9570)),_N_E=t.O()}]);