!function(){var e=document.createElement("style");e.innerHTML=".my-canvas{width:300px;height:600px}\n",document.head.appendChild(e),System.register(["./index-legacy.04b080b2.js"],(function(e){"use strict";var n,t,r;return{setters:[function(e){n=e.r,t=e.a,r=e.j}],execute:function(){let c,o,i=0,s=0;e("default",(()=>{const e=n.exports.useRef(null),u=n.exports.useRef("up"),a=async()=>{c=e.current.getContext("2d");const{left:n,top:t}=e.current.getBoundingClientRect();o=new OffscreenCanvas(e.current.width,e.current.height),o.getContext("2d"),i=n,s=t,await new Promise(((n,t)=>{const r=new Image;r.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/1686831479688.jpg",r.crossOrigin="Anonymous",r.onload=()=>{c.drawImage(r,0,0,e.current.width,e.current.height),n(!0)}}))};n.exports.useEffect((()=>{a()}),[]);return t("div",{children:[r("div",{children:r("button",{onClick:()=>{const n=e.current.toDataURL("image/png"),t=new Image;t.src=n;const r=document.getElementById("img-wrapper");null==r||r.appendChild(t)},children:"导出图片"})}),r("div",{id:"img-wrapper"}),r("canvas",{className:"my-canvas",width:300,height:600,ref:e,onMouseDown:e=>{if("down"===u.current)return;u.current="down";const{clientX:n,clientY:t}=e;let r=n-i,o=t-s;c.strokeStyle="red",c.lineWidth=4,c.beginPath(),c.moveTo(r,o)},onMouseMove:e=>{if("up"===u.current)return;const{clientX:n,clientY:t}=e;let r=n-i,o=t-s;c.lineTo(r,o),c.stroke()},onMouseUp:e=>{console.log("onMouseUp"),"up"!==u.current&&(u.current="up",c.closePath())}})]})}))}}}))}();
