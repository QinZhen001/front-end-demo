import{r as s,a as l,j as e}from"./index.06c9b209.js";const u=300,b=150,v=20,F=()=>{const c=s.exports.useRef(null),n=s.exports.useRef(null),a=s.exports.useRef(null);let o=null,i=[];const p=async t=>{const d=t==="screen"?"getDisplayMedia":"getUserMedia",r=await navigator.mediaDevices[d]({video:{width:u,height:b,frameRate:v}});c.current&&(c.current.srcObject=r),o=new MediaRecorder(r,{mimeType:"video/webm"}),o.ondataavailable=m=>{console.log("mediaRecorder ondataavailable ",m),i.push(m.data)},o.start(100)};return l("div",{children:[l("div",{children:[e("video",{autoPlay:!0,id:"player",ref:c}),e("video",{id:"recordPlayer",ref:n})]}),l("section",{children:[e("button",{id:"startScreen",onClick:()=>{p("screen")},children:"\u5F00\u542F\u5F55\u5C4F"}),e("button",{id:"startCamera",onClick:()=>{p("camera")},children:"\u5F00\u542F\u6444\u50CF\u5934"}),e("button",{onClick:()=>{if(a.current){var t=a.current.getContext("2d");a.current.width=u,a.current.height=b,t.drawImage(c.current,0,0,u,b)}},children:"\u622A\u56FE"}),e("button",{id:"stop",onClick:()=>{o.stop()},children:"\u7ED3\u675F"}),e("button",{id:"reply",onClick:()=>{const t=new Blob(i,{type:"video/webm"});n.current&&(n.current.src=window.URL.createObjectURL(t),console.log("replay src ",n.current.src),n.current.play())},children:"\u56DE\u653E"}),e("button",{id:"download",onClick:()=>{var t=new Blob(i,{type:"video/webm"}),d=window.URL.createObjectURL(t),r=document.createElement("a");r.href=d,r.style.display="none",r.download="record.webm",r.click()},children:"\u4E0B\u8F7D"})]}),e("div",{children:e("canvas",{id:"canvas",ref:a})})]})};export{F as WebRtcSimple,F as default};
