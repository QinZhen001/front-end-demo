import{r as n,a as i,j as c}from"./index.d257e875.js";const d=["click","touchstart","mousedown","keydown"],g=()=>{const t=n.exports.useRef(),[r,l]=n.exports.useState();n.exports.useEffect(()=>(u(),()=>s()),[]);const a=e=>{t.current=e,l(e)},u=()=>{d.forEach(e=>{document.addEventListener(e,a,{capture:!0,passive:!1})})},s=()=>{d.forEach(e=>{document.removeEventListener(e,a)})};return{last:r,getLast:()=>t.current}},k=t=>{console.log("[mock send]: ",t)},L=()=>{const{getLast:t}=g();n.exports.useLayoutEffect(()=>{r()},[]);const r=()=>{PerformanceObserver&&new PerformanceObserver(s=>{s.getEntries().forEach(o=>{if(o.duration>100){const e=t();requestIdleCallback(()=>{k({type:"longTask",eventType:e==null?void 0:e.type,startTime:o.startTime,duration:o.duration,selector:e==null?void 0:e.target})})}})}).observe({entryTypes:["longtask"]})};return i("div",{children:[c("button",{onClick:()=>{console.log("test1")},children:"test1"}),c("button",{onClick:()=>{console.log("test2")},children:"test2"}),c("button",{onClick:()=>{let s=Date.now();console.log("longTask\u5F00\u59CB start",s),console.log("longTask\u7ED3\u675F end",Date.now())},children:"add long task"})]})};export{L as default};
