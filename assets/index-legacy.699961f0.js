System.register(["./index-legacy.ef51f9b6.js"],(function(e){"use strict";var r,t,n;return{setters:[function(e){r=e.r,t=e.a,n=e.j}],execute:function(){const c=()=>{const e=r.exports.useRef(null),c=r.exports.useRef(null),i=r.exports.useRef(null);let a=null,o=[];const d=async r=>{const t="screen"===r?"getDisplayMedia":"getUserMedia",n=await navigator.mediaDevices[t]({video:{width:300,height:150,frameRate:20}});e.current&&(e.current.srcObject=n),a=new MediaRecorder(n,{mimeType:"video/webm"}),a.ondataavailable=e=>{console.log("mediaRecorder ondataavailable ",e),o.push(e.data)},a.start(100)};return t("div",{children:[t("div",{children:[n("video",{autoPlay:!0,id:"player",ref:e}),n("video",{id:"recordPlayer",ref:c})]}),t("section",{children:[n("button",{id:"startScreen",onClick:()=>{d("screen")},children:"开启录屏"}),n("button",{id:"startCamera",onClick:()=>{d("camera")},children:"开启摄像头"}),n("button",{onClick:()=>{if(i.current){var r=i.current.getContext("2d");i.current.width=300,i.current.height=150,r.drawImage(e.current,0,0,300,150)}},children:"截图"}),n("button",{id:"stop",onClick:()=>{a.stop()},children:"结束"}),n("button",{id:"reply",onClick:()=>{const e=new Blob(o,{type:"video/webm"});c.current&&(c.current.src=window.URL.createObjectURL(e),console.log("replay src ",c.current.src),c.current.play())},children:"回放"}),n("button",{id:"download",onClick:()=>{var e=new Blob(o,{type:"video/webm"}),r=window.URL.createObjectURL(e),t=document.createElement("a");t.href=r,t.style.display="none",t.download="record.webm",t.click()},children:"下载"})]}),n("div",{children:n("canvas",{id:"canvas",ref:i})})]})};e({WebRtcSimple:c,default:c})}}}));
