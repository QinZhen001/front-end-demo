var U=Object.defineProperty;var D=(t,e,r)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var y=(t,e,r)=>(D(t,typeof e!="symbol"?e+"":e,r),r);import{j as F,r as x,L as E,O,s as a,H as T,R as $,a as _,b as q,c as J}from"./vendor.4880073b.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}};V();const n=F.exports.jsx,h=F.exports.jsxs,H=(t,e=[])=>new Promise((r,s)=>{e.push((o,l)=>o?s(o):r(l)),t.apply(null,e)}),R=t=>{if(t===null||typeof t!="object")return t;if(Array.isArray(t)){let e=[];for(let r of t)e.push(R(r));return e}else{let e={};const r=Object.keys(t);for(const s of r)e[s]=R(t[s]);return e}},A=async({exponential:t,interval:e,factor:r,jitter:s})=>{e=t?e*r:e,e&&await new Promise(o=>setTimeout(o,e+s))},b=async(t,e=[],r={})=>{let{retriesMax:s=3,interval:o=0,jitter:l=0,factor:c=2,onAttemptFail:m=A,exponential:C=!0,isCb:P}=r;l&&(l=Math.floor(Math.random()*l)+1);for(let d=0;d<s;d++)try{let i=null;return P?i=await H(t,R(e)):i=await t.apply(null,e),i}catch(i){if(s===d+1||Object.prototype.hasOwnProperty.call(i,"retryable")&&!i.retryable)throw i;if(!await m({error:i,currentRetry:d,retriesMax:s,interval:o,exponential:C,factor:c,jitter:l})&&m!==A)return}};const K=()=>"fn1";let N=0;const Y=()=>new Promise((t,e)=>{setTimeout(()=>{N++==1?(t("second resolve"),N=0):e("second reject")},1e3)}),z=async()=>{throw new Error("Error")},G=t=>{t(null,"funCallBack")},Q=(t,e)=>{e(null,t)},X=(t,e)=>{console.log("arg1",t);let r=new Error("funCallBackWithErr");e(r,t)},Z=()=>h("div",{className:"retry",children:[n("button",{onClick:async()=>{const c=await b(K);console.log("retryNormal",c)},children:"retryNormal"}),n("button",{onClick:async()=>{const c=await b(z);console.log("retryError",c)},children:"retryError"}),n("button",{onClick:async()=>{const c=await b(Y);console.log("retrySecond",c)},children:"retrySecond"}),n("button",{onClick:async()=>{const c=await b(G,[],{isCb:!0});console.log("retryCallBack",c)},children:"retryCallBack"}),n("button",{onClick:async()=>{const c=await b(Q,[{value:"arg1"}],{isCb:!0});console.log("retryCallBackWithArgs",c)},children:"retryCallBackWithArgs"}),n("button",{onClick:async()=>{const c=await b(X,[{value:"arg1"}],{isCb:!0});console.log("retryCallBackWithErr",c)},children:"retryCallBackWithErr"})]}),ee=()=>{const t=x.exports.useRef(null),e=x.exports.useRef(null);let r=null,s=[];const o=async d=>{const i=d==="screen"?"getDisplayMedia":"getUserMedia",p=await navigator.mediaDevices[i]({video:{width:500,height:300,frameRate:20}});t.current&&(t.current.srcObject=p),r=new MediaRecorder(p,{mimeType:"video/webm"}),r.ondataavailable=B=>{console.log("mediaRecorder ondataavailable ",B),s.push(B.data)},r.start(100)};return h("div",{children:[h("div",{children:[n("video",{autoPlay:!0,id:"player",ref:t}),n("video",{id:"recordPlayer",ref:e})]}),h("section",{children:[n("button",{id:"startScreen",onClick:()=>{o("screen")},children:"\u5F00\u542F\u5F55\u5C4F"}),n("button",{id:"startCamera",onClick:()=>{o("camera")},children:"\u5F00\u542F\u6444\u50CF\u5934"}),n("button",{id:"stop",onClick:()=>{r.stop()},children:"\u7ED3\u675F"}),n("button",{id:"reply",onClick:()=>{const d=new Blob(s,{type:"video/webm"});e.current&&(e.current.src=window.URL.createObjectURL(d),console.log("replay src ",e.current.src),e.current.play())},children:"\u56DE\u653E"}),n("button",{id:"download",onClick:()=>{var d=new Blob(s,{type:"video/webm"}),i=window.URL.createObjectURL(d),p=document.createElement("a");p.href=i,p.style.display="none",p.download="record.webm",p.click()},children:"\u4E0B\u8F7D"})]})]})};function te(t){return t.length==0?e=>e:t.length===1?t[0]:e=>t.reduce((r,s)=>s(r),e)}function re(t){return e=>new W(r=>e.subscribe({next(o){return r.next(t(o))},error(o){r.error(o)},complete(){r.complete()}}))}class W{constructor(e){y(this,"_subscribe");this._subscribe=e}subscribe(e){const r=new oe(e);return r.add(this._subscribe(r)),r}pipe(...e){return te(e)(this)}}class ne{constructor(){y(this,"_teardowns");this._teardowns=[]}unsubscribe(){this._teardowns.forEach(e=>{typeof e=="function"?e():e.unsubscribe()})}add(e){e&&this._teardowns.push(e)}}class oe extends ne{constructor(e){super();y(this,"observer");y(this,"isStopped");this.observer=e,this.isStopped=!1}next(e){this.observer.next&&!this.isStopped&&this.observer.next(e)}error(e){this.isStopped=!0,this.observer.error&&this.observer.error(e)}complete(){this.isStopped=!0,this.observer.complete&&this.observer.complete(),this.unsubscribe&&this.unsubscribe()}}let v,f;const ce=()=>{const[t,e]=x.exports.useState(0);return h("div",{className:"rx-js",children:["RxJS",h("div",{children:["current: ",t]}),n("button",{onClick:()=>{v||(v=new W(c=>{let m=0;const C=setInterval(()=>{c.next(++m)},1e3);return function(){clearInterval(C)}}))},children:"Create Observable"}),n("button",{onClick:()=>{f||(f=v.subscribe({next:c=>{console.log("next",c),e(c)},error:c=>console.error(c),complete:()=>console.log("complete")}))},children:"Subscribe"}),n("button",{onClick:()=>{f||(f=v.pipe(re(c=>c*c)).subscribe({next:c=>{console.log("pipe next",c),e(c)},error:c=>console.error(c),complete:()=>console.log("complete")}))},children:"Subscribe Pipe"}),n("button",{onClick:()=>{f.unsubscribe()},children:"Unsubscribe"})]})},se=()=>{var e;const t=((e=w.find(r=>r.path=="/other"))==null?void 0:e.children)||[];return h("div",{children:[n("ul",{children:t.map(({title:r,path:s,element:o})=>n("li",{children:n(E,{to:s,children:r})},s))}),n(O,{})]})},le=()=>n("div",{children:"vue \u9875\u9762"}),L=[a.exports.unstable_ImmediatePriority,a.exports.unstable_UserBlockingPriority,a.exports.unstable_NormalPriority,a.exports.unstable_LowPriority],I=["noop","ImmediatePriority","UserBlockingPriority","NormalPriority","LowPriority","IdlePriority"];let u=document.querySelector("#react-scheduler"),g=[],S=a.exports.unstable_IdlePriority,k;const ie=()=>{L.forEach(e=>{const r=document.createElement("button");u||(u=document.querySelector("#react-scheduler")),u.appendChild(r),r.id=`btn-${e}`,r.innerText=I[e],r.onclick=()=>{g.push({priority:e,count:100}),j()}});const t=document.createElement("button");u.appendChild(t),t.innerText="clear task",t.onclick=()=>{u=document.querySelector("#react-scheduler");const e=u.getElementsByTagName("span");console.log("spans",e,e.length);for(let r of e)u.removeChild(r)}},ae=()=>{u&&L.forEach(t=>{const e=document.querySelector(`#btn-${t}`);e&&u.removeChild(e)})},j=()=>{console.log("schedule--------");const t=a.exports.unstable_getFirstCallbackNode(),e=g.sort((s,o)=>s.priority-o.priority)[0];if(!e){k=null,t&&a.exports.unstable_cancelCallback(t);return}const{priority:r}=e;r!==S&&(t&&a.exports.unstable_cancelCallback(t),k=a.exports.unstable_scheduleCallback(r,M.bind(null,e)))},M=(t,e)=>{const r=t.priority===a.exports.unstable_ImmediatePriority||e;for(;(r||!a.exports.unstable_shouldYield())&&t.count;)t.count--,ue(t.priority);if(S=t.priority,!t.count){const l=g.indexOf(t);g.splice(l,1),S=a.exports.unstable_IdlePriority}const s=k;j();const o=k;if(o&&s===o)return M.bind(null,t)},ue=t=>{if(u){const e=document.createElement("span");e.innerText=`${I[t]} `,e.className=`pri-${t}`,u.appendChild(e)}},de=()=>(x.exports.useEffect(()=>(ie(),()=>{ae()}),[]),n("div",{id:"react-scheduler",children:n("div",{children:"React\u6838\u5FC3\u8C03\u5EA6\u529F\u80FD"})})),pe=()=>{var e;const t=((e=w.find(r=>r.path=="/react"))==null?void 0:e.children)||[];return h("div",{children:[n("ul",{children:t.map(({title:r,path:s,element:o})=>n("li",{children:n(E,{to:s,children:r})},s))}),n(O,{})]})},he=()=>n("div",{children:"WebpackPageComponent"}),be=()=>n("div",{children:"ReduxPageComponent"}),me=()=>n("div",{children:"NodePageComponent"});const ye=()=>{const t=w.filter(e=>e.path!=="/");return n("div",{children:n("ul",{children:t.map(({path:e,title:r})=>n("li",{children:n(E,{to:e,children:r})},e))})})},fe=()=>n("div",{children:"vuexPageComponent"}),Ce={path:"/other",element:n(se,{}),title:"other \u76F8\u5173",children:[{path:"retry",element:n(Z,{}),title:"\u591A\u6B21\u91CD\u8BD5promise"},{path:"webrtc",element:n(ee,{}),title:"\u5FEB\u901F\u5165\u95E8 WebRTC"},{path:"RxJS",element:n(ce,{}),title:"\u5B9E\u73B0\u7B80\u6613 RxJS"}]},w=[{path:"/vue",element:n(le,{}),title:"vue \u76F8\u5173"},{path:"/vuex",element:n(fe,{}),title:"vuex \u76F8\u5173"},{path:"/react",element:n(pe,{}),title:"react \u76F8\u5173",children:[{path:"scheduler",element:n(de,{}),title:"react \u8C03\u5EA6"}]},{path:"/redux",element:n(be,{}),title:"redux \u76F8\u5173"},{path:"/webpack",element:n(he,{}),title:"webpack \u76F8\u5173"},{path:"/node",element:n(me,{}),title:"node \u76F8\u5173"},Ce,{path:"/",element:n(ye,{}),title:"default"}],xe=()=>n(T,{children:n($,{children:w.map(t=>n(_,{path:t.path,element:t.element,children:t.children?t.children.map(({path:e,element:r})=>n(_,{path:e,element:r},e)):null},t.path))})});function ve(){return n(xe,{})}q.render(n(J.StrictMode,{children:n(ve,{})}),document.getElementById("root"));
