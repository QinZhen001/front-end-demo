!function(){var e=document.createElement("style");e.innerHTML=".content{display:flex;gap:24px}.canvas-wrapper{position:relative;width:300px;height:600px}.off-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:-1;visibility:hidden}.my-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:1;visibility:visible}\n",document.head.appendChild(e),System.register(["./index-legacy.ef51f9b6.js"],(function(e){"use strict";var t,n,i;return{setters:[function(e){t=e.r,n=e.a,i=e.j}],execute:function(){let o,a=0,l=0,c="",s=new Map,r=[];window.operates=r,window.map=s;e("default",(()=>{const e=t.exports.useRef(null);let h=!1,d="",p=new Set;const f=(e,t)=>{const n=o.getImageData(e,t,1,1);var i=n.data[0],a=n.data[1],l=n.data[2];return"#"+(i<<16|a<<8|l).toString(16).padStart(6,"0")},u=async()=>{(()=>{o=e.current.getContext("2d",{willReadFrequently:!0});const{left:t,top:n}=e.current.getBoundingClientRect();a=t,l=n})(),await new Promise(((t,n)=>{const i=new Image;i.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/266631695719704_.pic.jpg",i.crossOrigin="Anonymous",i.onload=()=>{o.drawImage(i,0,0,e.current.width,e.current.height),t(!0)}})),await(async()=>{let t=e.current.width,n=e.current.height,i=Date.now();for(let e=0;e<t-1;e++)for(let t=0;t<n-1;t++){let n=f(e,t);if(s.has(n))s.get(n).add([e,t]);else{let i=new Set;i.add([e,t]),s.set(n,i)}}for(let[e,a]of s)a.size<=100&&s.delete(e);let o=Date.now();console.log("cost time ",o-i),console.log("final map",s)})()};t.exports.useEffect((()=>{u()}),[]);const g=()=>{if(h)h=!1;else for(;r.length;){const{color:e,data:t}=r.pop()||{};if(e&&t){o.beginPath(),o.fillStyle=e;for(let e of t){const[t,n]=e;o.rect(t,n,1,1)}o.fill(),o.closePath()}}},v=()=>{if(!c)return;const e=s.get(c);d=function(e,t){var n=!1;"#"==e[0]&&(e=e.slice(1),n=!0);var i=parseInt(e,16),o=(i>>16)+t;o>255?o=255:o<0&&(o=0);var a=(i>>8&255)+t;a>255?a=255:a<0&&(a=0);var l=(255&i)+t;return l>255?l=255:l<0&&(l=0),(n?"#":"")+(l|a<<8|o<<16).toString(16)}(c,100),p=e,o.beginPath(),o.fillStyle=d;for(let t of e){const[e,n]=t;o.rect(e,n,1,1)}o.fill(),o.closePath(),r.push({color:c,data:e})};return n("div",{children:[i("section",{}),n("section",{className:"content",children:[n("div",{children:[i("h4",{children:"模特图"}),i("img",{src:"https://fullapp.oss-cn-beijing.aliyuncs.com/pic/266571695718749_.pic.jpg",width:"300",height:"600"})]}),n("div",{children:[i("h4",{children:"色块图（原图）"}),i("img",{src:"https://fullapp.oss-cn-beijing.aliyuncs.com/pic/266631695719704_.pic.jpg",width:"300",height:"600"})]}),n("div",{children:[i("h4",{children:"色块图（支持用户hover高亮，点击选中）"}),i("div",{className:"canvas-wrapper",children:i("canvas",{onMouseMove:e=>{let t=Math.floor(e.clientX-a),n=Math.floor(e.clientY-l);const i=f(t,n);c!==i&&(c=i,s.has(c)&&(g(),v()))},onMouseLeave:()=>{c="",g()},onClick:()=>{h=!0,o.beginPath(),o.fillStyle=d;for(let e of p){const[t,n]=e;o.rect(t,n,1,1)}o.fill(),o.closePath(),r.pop(),r.push({color:d,data:p})},className:"my-canvas",width:300,height:600,ref:e})})]})]})]})}))}}}))}();
