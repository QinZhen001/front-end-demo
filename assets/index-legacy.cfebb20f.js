!function(){var e=document.createElement("style");e.innerHTML=".content{display:flex}.canvas-wrapper{position:relative;width:300px;height:600px}.off-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:-1;visibility:hidden}.my-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:1;visibility:visible}\n",document.head.appendChild(e),System.register(["./index-legacy.9b48566a.js"],(function(e){"use strict";var t,n,i;return{setters:[function(e){t=e.r,n=e.a,i=e.j}],execute:function(){let o,r,c=0,s=0;e("default",(()=>{const e=t.exports.useRef(null),a=t.exports.useRef(null),l=t.exports.useRef("up"),u=async()=>{r=a.current.getContext("2d"),r.fillStyle="black",r.fillRect(0,0,e.current.width,e.current.height),(()=>{o=e.current.getContext("2d");const{left:t,top:n}=e.current.getBoundingClientRect();c=t,s=n})(),await new Promise(((t,n)=>{const i=new Image;i.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/1686831479688.jpg",i.crossOrigin="Anonymous",i.onload=()=>{o.drawImage(i,0,0,e.current.width,e.current.height),t(!0)}}))};t.exports.useEffect((()=>{u()}),[]);const d=(e,t)=>{o.strokeStyle="red",o.lineWidth=4,o.beginPath(),o.moveTo(e,t),r.strokeStyle="white",r.lineWidth=4,r.beginPath(),r.moveTo(e,t)},p=(e,t)=>{o.lineTo(e,t),o.stroke(),r.lineTo(e,t),r.stroke()},h=()=>{o.closePath(),r.closePath()};return n("div",{children:[i("section",{children:i("button",{onClick:()=>{const e=a.current.toDataURL("image/png"),t=new Image;t.src=e;const n=document.getElementById("img-wrapper");null==n||n.appendChild(t)},children:"导出图片"})}),n("section",{className:"content",children:[n("div",{className:"canvas-wrapper",children:[i("canvas",{className:"off-canvas",width:300,height:600,ref:a}),i("canvas",{className:"my-canvas",width:300,height:600,ref:e,onMouseDown:e=>{if("down"===l.current)return;l.current="down";const{clientX:t,clientY:n}=e;d(t-c,n-s)},onMouseMove:e=>{if("up"===l.current)return;const{clientX:t,clientY:n}=e;p(t-c,n-s)},onMouseUp:e=>{console.log("onMouseUp"),"up"!==l.current&&(l.current="up",h())}})]}),i("div",{id:"img-wrapper"})]})]})}))}}}))}();
