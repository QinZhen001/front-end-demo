System.register(["./index-legacy.6be2aea6.js"],(function(e){"use strict";var n,o,t;return{setters:[function(e){n=e.r,o=e.a,t=e.j}],execute:function(){var a,l,c,d;const i=()=>{const e=n.exports.useRef(null),[i,r]=n.exports.useState(""),s=e=>{c&&("open"==c.readyState?console.log("sendChannel is open"):console.log("sendChannel is closed"))},u=e=>{(d=e.channel).onmessage=v,d.onopen=h,d.onclose=h},v=n=>{console.log("Received Message: "+n.data);var o=document.createElement("p"),t=document.createTextNode(n.data);o.appendChild(t),e.current.appendChild(o)},h=e=>{d&&console.log("Receive channel's status has changed to "+d.readyState)},p=e=>{console.error("Oh noes! addICECandidate failed!",e)},C=e=>{console.log("Unable to create an offer: "+e.toString())};return o("div",{children:[o("div",{children:[t("button",{onClick:()=>{a=new RTCPeerConnection,(c=a.createDataChannel("sendChannel")).onopen=s,c.onclose=s,(l=new RTCPeerConnection).ondatachannel=u,a.onicecandidate=e=>{var n;return!e.candidate||(null===(n=l)||void 0===n?void 0:n.addIceCandidate(e.candidate).catch(p))},l.onicecandidate=e=>{var n;return!e.candidate||(null===(n=a)||void 0===n?void 0:n.addIceCandidate(e.candidate).catch(p))},a.createOffer().then((e=>{var n;return console.log("localConnection.createOffer() success"),null===(n=a)||void 0===n?void 0:n.setLocalDescription(e)})).then((()=>{var e;return null===(e=l)||void 0===e?void 0:e.setRemoteDescription(a.localDescription)})).then((()=>{var e;return null===(e=l)||void 0===e?void 0:e.createAnswer()})).then((e=>{var n;return null===(n=l)||void 0===n?void 0:n.setLocalDescription(e)})).then((()=>{var e;return null===(e=a)||void 0===e?void 0:e.setRemoteDescription(l.localDescription)})).catch(C)},children:"connectPeers"}),t("button",{onClick:()=>{var e,n,o,t;null===(e=c)||void 0===e||e.close(),null===(n=d)||void 0===n||n.close(),null===(o=a)||void 0===o||o.close(),null===(t=l)||void 0===t||t.close(),c=null,d=null,a=null,l=null},children:"disconnectPeers"})]}),o("section",{style:{padding:"5px"},children:[t("div",{children:t("input",{value:i,onChange:e=>r(e.target.value)})}),t("button",{onClick:()=>{var e;null===(e=c)||void 0===e||e.send(i)},children:"sendMessage"})]}),o("section",{style:{padding:"5px"},children:[t("div",{children:"Received Message: "}),t("div",{ref:e})]})]})};e({WebRtcDataChannel:i,default:i})}}}));
