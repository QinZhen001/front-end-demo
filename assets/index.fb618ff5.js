import{r as x,a as j,j as p}from"./index.2f1a2300.js";let l,m=0,C=0;function b(t,c,u){var i="#"+(t<<16|c<<8|u).toString(16).padStart(6,"0");return i}function D(t,c){var u=!1;t[0]=="#"&&(t=t.slice(1),u=!0);var i=parseInt(t,16),g=(i>>16)+c;g>255?g=255:g<0&&(g=0);var h=(i>>8&255)+c;h>255?h=255:h<0&&(h=0);var d=(i&255)+c;return d>255?d=255:d<0&&(d=0),(u?"#":"")+(d|h<<8|g<<16).toString(16)}let f=new Map;const P=()=>{const t=x.exports.useRef(null),c=()=>new Promise((n,a)=>{const e=new Image;e.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/264121695293447_.pic.jpg",e.crossOrigin="Anonymous",e.onload=()=>{l.drawImage(e,0,0,t.current.width,t.current.height),n(!0)}}),u=()=>{l=t.current.getContext("2d",{willReadFrequently:!0});const{left:n,top:a}=t.current.getBoundingClientRect();m=n,C=a},i=(n,a)=>{const e=l.getImageData(n,a,1,1);var s=e.data[0],r=e.data[1],o=e.data[2];return b(s,r,o)},g=async()=>{let n=t.current.width,a=t.current.height,e=Date.now();for(let r=0;r<n-1;r++)for(let o=0;o<a-1;o++){let v=i(r,o);if(f.has(v))f.get(v).add([r,o]);else{let w=new Set;w.add([r,o]),f.set(v,w)}}let s=Date.now();console.log("cost time ",s-e),console.log(f)},h=async()=>{u(),await c(),await g()};x.exports.useEffect(()=>{h()},[]);const d=n=>{let a=n.clientX-m,e=n.clientY-C;const s=i(a,e);if(f.has(s)){let r=f.get(s);y(s,r)}},y=(n,a)=>{l.beginPath();let e=D(n,50);console.log("onClick hexColor",n,e,a.size),l.fillStyle=e;for(let s of a){const[r,o]=s;l.rect(r,o,1,1)}l.fill(),l.closePath()};return j("div",{children:[p("section",{}),p("section",{className:"content",children:p("div",{className:"canvas-wrapper",children:p("canvas",{onClick:d,className:"my-canvas",width:300,height:600,ref:t})})})]})};export{P as default};
