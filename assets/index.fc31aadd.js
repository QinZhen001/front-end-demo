import{r as i,a as l,j as e}from"./index.e68da9fa.js";const u=300,b=150,h=20,F=()=>{const c=i.exports.useRef(null),n=i.exports.useRef(null),o=i.exports.useRef(null);let a=null;const s=[],p=async t=>{const d=t==="screen"?"getDisplayMedia":"getUserMedia",r=await navigator.mediaDevices[d]({video:{width:u,height:b,frameRate:h}});c.current&&(c.current.srcObject=r),a=new MediaRecorder(r,{mimeType:"video/webm"}),a.ondataavailable=m=>{console.log("mediaRecorder ondataavailable ",m),s.push(m.data)},a.start(100)};return l("div",{children:[l("div",{children:[e("video",{autoPlay:!0,id:"player",ref:c}),e("video",{id:"recordPlayer",ref:n})]}),l("section",{children:[e("button",{id:"startScreen",onClick:()=>{p("screen")},children:"\u5F00\u542F\u5F55\u5C4F"}),e("button",{id:"startCamera",onClick:()=>{p("camera")},children:"\u5F00\u542F\u6444\u50CF\u5934"}),e("button",{onClick:()=>{if(o.current){const t=o.current.getContext("2d");o.current.width=u,o.current.height=b,t.drawImage(c.current,0,0,u,b)}},children:"\u622A\u56FE"}),e("button",{id:"stop",onClick:()=>{a.stop()},children:"\u7ED3\u675F"}),e("button",{id:"reply",onClick:()=>{const t=new Blob(s,{type:"video/webm"});n.current&&(n.current.src=window.URL.createObjectURL(t),console.log("replay src ",n.current.src),n.current.play())},children:"\u56DE\u653E"}),e("button",{id:"download",onClick:()=>{const t=new Blob(s,{type:"video/webm"}),d=window.URL.createObjectURL(t),r=document.createElement("a");r.href=d,r.style.display="none",r.download="record.webm",r.click()},children:"\u4E0B\u8F7D"})]}),e("div",{children:e("canvas",{id:"canvas",ref:o})})]})};export{F as MediaRecorderComponent,F as default};
