import{_ as m}from"./vue.min.b1dbee44.js";import{r as d,a as c,j as u}from"./index.f6ad69a0.js";let a=null;class p{constructor(t={}){this.commit=(s,n)=>{console.log("commit this",this),this.mutations[s](n)},this.vm=new a({data:{state:t.state}});let i=t.getters||{};this.getters={},Object.keys(i).forEach(s=>{Object.defineProperty(this.getters,s,{get:()=>i[s](this.state)})});let r=t.mutations||{};this.mutations={},Object.keys(r).forEach(s=>{this.mutations[s]=n=>{r[s](this.state,n)}});let h=t.actions||{};this.actions={},Object.keys(h).forEach(s=>{this.actions[s]=n=>{console.log("action this",this),h[s](this,n)}})}dispatch(t,i){this.actions[t](i)}get state(){return this.vm.state}}const g=function(e){a=e,a.mixin({beforeCreate(){this.$options&&this.$options.store?this.$store=this.$options.store:this.$store=this.$parent&&this.$parent.$store}})};let l={Store:p,install:g};m.use(l);var o=new l.Store({state:{num:0},getters:{getNum(e){return e.num+1}},mutations:{incre(e,t){e.num+=t}},actions:{actionTest({commit:e},t){setTimeout(()=>{e("incre",t)},2e3)}}});window.store=o;const y=()=>{const[e,t]=d.exports.useState(0),i=()=>{o.mutations.incre(10),t(e+1)},r=()=>{o.actions.actionTest(20),setTimeout(()=>{t(e+1)},3e3)};return c("div",{style:{padding:"10px"},children:[c("div",{children:["store.state: ",o.state.num]}),c("div",{children:["store.getters: ",o.getters.getNum]}),c("div",{children:[u("button",{onClick:i,children:"sync incre"}),u("button",{onClick:r,children:"async incre"})]})]})};export{y as SimpleVuex,y as default};
