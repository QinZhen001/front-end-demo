import{r as g,a as R,j as b}from"./index.e68da9fa.js";let h,r=0,n;const d=new AudioContext,y=d.createBufferSource(),q=()=>{const s=g.exports.useRef(null),u=g.exports.useRef(null);function A(){var w,x;requestAnimationFrame(A),n.getByteFrequencyData(h);const e=u.current.getContext("2d"),f=((w=u.current)==null?void 0:w.width)||0,a=((x=u.current)==null?void 0:x.height)||0;e==null||e.clearRect(0,0,f,a);let t,o,c,l,p;for(let i=0,B=0;i<r;i++)t=h[i],o=f/r*2,c=t+25*(i/r),l=250*(i/r),p=50,e.fillStyle="rgb("+c+","+l+","+p+")",e==null||e.fillRect(B,a-t,o,t),B+=o+2}return g.exports.useEffect(()=>{console.log("ref",s),s.current&&(s.current.onchange=function(e){var t;const f=(t=e.target)==null?void 0:t.files[0],a=new FileReader;a.readAsArrayBuffer(f),a.onload=async o=>{const c=o.target.result;console.log("audioData",c);const l=await d.decodeAudioData(c);y.buffer=l,n=d.createAnalyser(),n.fftSize=512,y.connect(n),n.connect(d.destination),r=n.frequencyBinCount,h=new Uint8Array(r),y.start(),A()}})},[]),R("div",{children:[b("input",{id:"audioFile",ref:s,type:"file",accept:"audio/*"}),b("canvas",{ref:u,width:"500",height:"300"})]})};export{q as AudioApi,q as default};
