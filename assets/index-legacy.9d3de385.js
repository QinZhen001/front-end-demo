!function(){var t=document.createElement("style");t.innerHTML=".content{display:flex}.canvas-wrapper{position:relative;width:300px;height:600px}.off-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:-1;visibility:hidden}.my-canvas{position:absolute;left:0;right:0;top:0;bottom:0;z-index:1;visibility:visible}\n",document.head.appendChild(t),System.register(["./index-legacy.04f878cd.js"],(function(t){"use strict";var e,o,n;return{setters:[function(t){e=t.r,o=t.a,n=t.j}],execute:function(){let a,i=0,l=0,r="",s=new Map,c=[];window.operates=c,window.map=s;t("default",(()=>{const t=e.exports.useRef(null),d=(t,e)=>{const o=a.getImageData(t,e,1,1);var n=o.data[0],i=o.data[1],l=o.data[2];return"#"+(n<<16|i<<8|l).toString(16).padStart(6,"0")},f=async()=>{(()=>{a=t.current.getContext("2d",{willReadFrequently:!0});const{left:e,top:o}=t.current.getBoundingClientRect();i=e,l=o})(),await new Promise(((e,o)=>{const n=new Image;n.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/264121695293447_.pic.jpg",n.crossOrigin="Anonymous",n.onload=()=>{a.drawImage(n,0,0,t.current.width,t.current.height),e(!0)}})),await(async()=>{let e=t.current.width,o=t.current.height,n=Date.now();for(let t=0;t<e-1;t++)for(let e=0;e<o-1;e++){let o=d(t,e);if(s.has(o))s.get(o).add([t,e]);else{let n=new Set;n.add([t,e]),s.set(o,n)}}for(let[t,i]of s)i.size<=100&&s.delete(t);let a=Date.now();console.log("cost time ",a-n),console.log("final map",s)})()};e.exports.useEffect((()=>{f()}),[]);const h=()=>{for(;c.length;){const{color:t,data:e}=c.pop()||{};if(t&&e){console.log("restore drawColor",t),a.beginPath(),a.fillStyle=t;for(let t of e){const[e,o]=t;a.rect(e,o,1,1)}a.fill(),a.closePath()}}},u=()=>{if(!r)return;const t=s.get(r);let e=function(t,e){var o=!1;"#"==t[0]&&(t=t.slice(1),o=!0);var n=parseInt(t,16),a=(n>>16)+e;a>255?a=255:a<0&&(a=0);var i=(n>>8&255)+e;i>255?i=255:i<0&&(i=0);var l=(255&n)+e;return l>255?l=255:l<0&&(l=0),(o?"#":"")+(l|i<<8|a<<16).toString(16)}(r,50);console.log("highlight drawColor",e),a.beginPath(),a.fillStyle=e;for(let o of t){const[t,e]=o;a.rect(t,e,1,1)}a.fill(),a.closePath(),c.push({color:r,data:t})};return o("div",{children:[n("section",{}),n("section",{className:"content",children:n("div",{className:"canvas-wrapper",children:n("canvas",{onMouseMove:t=>{let e=Math.floor(t.clientX-i),o=Math.floor(t.clientY-l);const n=d(e,o);r!==n&&(r=n,s.has(r)&&(h(),u()))},onMouseLeave:()=>{r="",h()},className:"my-canvas",width:300,height:600,ref:t})})})]})}))}}}))}();
