import{r as y,a as B,j as w}from"./index.f6ad69a0.js";let A,s=0,h;const S=()=>{const u=y.exports.useRef(null),f=y.exports.useRef(null);function x(e,o){console.log("context",e);const t=e.createAnalyser();return t.fftSize=512,o.connect(t),t.connect(e.destination),t}function p(){var g,n;requestAnimationFrame(p),h.getByteFrequencyData(A);const e=f.current.getContext("2d"),o=((g=f.current)==null?void 0:g.width)||0,t=((n=f.current)==null?void 0:n.height)||0;e==null||e.clearRect(0,0,o,t);let r,a,d,c,l;for(let i=0,b=0;i<s;i++)r=A[i],a=o/s*2,d=r+25*(i/s),c=250*(i/s),l=50,e.fillStyle="rgb("+d+","+c+","+l+")",e==null||e.fillRect(b,t-r,a,r),b+=a+2}return y.exports.useEffect(()=>{console.log("ref",u),u.current&&(u.current.onchange=function(e){var r;const o=(r=e.target)==null?void 0:r.files[0],t=new FileReader;t.readAsArrayBuffer(o),t.onload=a=>{var l;console.log("evt",a);const d=(l=a.currentTarget)==null?void 0:l.result,c=new AudioContext;c.decodeAudioData(d,g=>{const n=c.createBufferSource();n.buffer=g,console.log("dataSource",n),h=x(c,n),s=h.frequencyBinCount,console.log("analyser",h),A=new Uint8Array(s),n.start(),p()})}})},[]),B("div",{children:[w("input",{id:"audioFile",ref:u,type:"file",accept:"audio/*"}),w("canvas",{ref:f,width:"500",height:"300"})]})};export{S as AudioApi,S as default};
