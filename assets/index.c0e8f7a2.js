import{r as i,a as h,j as c}from"./index.2e272b65.js";let o,p,l=0,g=0;const y=()=>{const r=i.exports.useRef(null),s=i.exports.useRef("up"),d=()=>new Promise((t,n)=>{const e=new Image;e.src="https://fullapp.oss-cn-beijing.aliyuncs.com/pic/1686831479688.jpg",e.crossOrigin="Anonymous",e.onload=()=>{o.drawImage(e,0,0,r.current.width,r.current.height),t(!0)}}),m=()=>r.current.toDataURL("image/png"),f=async()=>{o=r.current.getContext("2d");const{left:t,top:n}=r.current.getBoundingClientRect();p=new OffscreenCanvas(r.current.width,r.current.height),p.getContext("2d"),l=t,g=n,await d()};return i.exports.useEffect(()=>{f()},[]),h("div",{children:[c("div",{children:c("button",{onClick:()=>{const t=m(),n=new Image;n.src=t;const e=document.getElementById("img-wrapper");e==null||e.appendChild(n)},children:"\u5BFC\u51FA\u56FE\u7247"})}),c("div",{id:"img-wrapper"}),c("canvas",{className:"my-canvas",width:300,height:600,ref:r,onMouseDown:t=>{if(s.current==="down")return;s.current="down";const{clientX:n,clientY:e}=t;let a=n-l,u=e-g;o.strokeStyle="red",o.lineWidth=4,o.beginPath(),o.moveTo(a,u)},onMouseMove:t=>{if(s.current==="up")return;const{clientX:n,clientY:e}=t;let a=n-l,u=e-g;o.lineTo(a,u),o.stroke()},onMouseUp:t=>{console.log("onMouseUp"),s.current!=="up"&&(s.current="up",o.closePath())}})]})};export{y as default};
