import{_ as h}from"./vue.min.b1dbee44.js";import{r as u,j as r,a as n}from"./index.d257e875.js";const a={props:{to:Object||String},render(e){console.log("router-link render",this===this._self);const t=this._self._root._router.isHashMode;this.to,typeof this.to=="object"&&this.to.path;let o=(t?"#":"")+this.to;return e("a",{attrs:{href:o}},this.$slots.default)}},l={render(e){let t=this._self._root._router.currentObj.path,s=this._self._root._router.routesMap[t];return console.log("router-view render",s),s?e(s):e()}};class i{constructor(t){this.mode=t.mode||"hash",this.routes=t.routes||[],this.isHashMode=this.mode==="hash",this.routesMap=this.createMap(this.routes),this.currentObj={path:""},this.initListener()}initListener(){const t=(this.isHashMode?location.hash.slice(1):location.pathname)||"/",o=this.isHashMode?"hashchange":"popstate";window.addEventListener("load",()=>{this.currentObj.path=t}),window.addEventListener(o,()=>{this.currentObj.path=(this.isHashMode?location.hash.slice(1):location.pathname)||"/"})}createMap(t){return t.reduce((o,s)=>(o[s.path]=s.component,o),{})}}i.install=function(e){let t=e;t.mixin({beforeCreate(){this.$options&&this.$options.router?(this._root=this,this._router=this.$options.router,t.util.defineReactive(this,"_route",this._router.currentObj)):this._root=this.$parent&&this.$parent._root,Object.defineProperty(this,"$router",{get(){return this._root._router}}),Object.defineProperty(this,"$route",{get(){return this._root._route}})}}),t.component("router-link",a),t.component("router-view",l)};h.use(i);const c={template:"<div>foo</div>"},p={template:"<div>bar</div>"},d=[{path:"/vue/simple-vue-router/foo",component:c},{path:"/vue/simple-vue-router/bar",component:p}],v=new i({routes:d}),f=()=>{u.exports.useEffect(()=>{e()},[]);const e=()=>{const t=new h({el:"#app",router:v,mounted(){console.log("created"),console.log("this.$route",this.$route),console.log("this.$router",this.$router)}});window.vue=t,console.log("vue",t)};return r("div",{children:n("div",{id:"app",children:[r("div",{children:"simple-vue-router"}),n("div",{children:[r("router-link",{to:"/vue/simple-vue-router/foo",children:"Go to Foo"}),r("span",{children:"\xA0\xA0\xA0"}),r("router-link",{to:"/vue/simple-vue-router/bar",children:"Go to Bar"})]}),r("div",{children:"router-view"}),r("router-view",{})]})})};export{f as default};
