import{a as o,j as u}from"./index.b4813bcd.js";class h{constructor(){this.queue=[],this.stop=0,this.wakeup=null}wait(){return new Promise(e=>{this.wakeup=()=>{this.wakeup=null,e()}})}setStop(){this.stop=1,this.wakeup&&this.wakeup()}enQueue(e){this.queue.push(e),this.wakeup&&this.wakeup()}handleTask(){if(this.queue.length===0)return;const e=this.queue;for(this.queue=[];e.length;)e.shift()()}async run(){for(;this.stop===0&&(this.handleTask(),this.stop!==1);)this.queue.length===0&&await this.wait();this.handleTask()}}const t=new h,a=()=>o("div",{children:[u("button",{onClick:()=>{console.log("enQueue");const i=new Date;t.enQueue(()=>{console.log("time: "+i)})},children:"enQueue \u6DFB\u52A0\u4EFB\u52A1"}),u("button",{onClick:()=>{console.log("run"),t.run()},children:"run \u542F\u52A8\u4E8B\u4EF6\u5FAA\u73AF"}),u("button",{onClick:()=>{console.log("end"),t.setStop()},children:"end \u5173\u95ED\u4E8B\u4EF6\u5FAA\u73AF"})]});export{a as default};
